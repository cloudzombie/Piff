<!--       src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDfn8fxigtH_YbtdTkO_zNkA6g3Mck-EsQ&callback=initMap">
 -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.css">
  <link rel="stylesheet" href="main.css">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.js"></script>
  <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <style type="text/css">
      html, body { height: 100%; margin: 0; padding: 0; }
      #map { height: 75%; background-size: cover;}
    </style>
  </head>
  <body>
    <header>PIFF!</header>
    <div id="map"></div>

<script type="text/javascript">
function initialize() {
  var myOptions = {
    zoom: 10,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("map"), myOptions);

  var initialLocation;
  var siberia = new google.maps.LatLng(60, 105);
  var newyork = new google.maps.LatLng(40.69847032728747, -73.9514422416687);
  var browserSupportFlag =  new Boolean();

  // NOTE: This uses cross-domain XHR, and may not work on older browsers.


  // Try W3C Geolocation (Preferred)
  if(navigator.geolocation) {
    browserSupportFlag = true;
    navigator.geolocation.getCurrentPosition(function(position) {
      initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
      map.setCenter(initialLocation);

      var marker = new google.maps.Marker({
        position: initialLocation,
        title: 'Your Location',
        map: map
      });

      google.maps.event.addDomListener(window, 'load', initialize)
    }, function() {
      handleNoGeolocation(browserSupportFlag);
    });
  }
  // Browser doesn't support Geolocation
  else {
    browserSupportFlag = false;
    handleNoGeolocation(browserSupportFlag);
  }

  function handleNoGeolocation(errorFlag) {
    if (errorFlag == true) {
      alert("Geolocation service failed.");
      initialLocation = newyork;
    } else {
      alert("Your browser doesn't support geolocation. We've placed you in Siberia.");
      initialLocation = siberia;
    }
    map.setCenter(initialLocation);
  }
}

  $(document).ready(function() {
    $('#strainhunter').on('submit', function(event){
      event.preventDefault();
      var userChoice = $('#hamburger').val();
      console.log(userChoice);
      var strainGame;

    // make an ajax call to get strains objects
    $.ajax({
      url: 'https://www.cannabisreports.com/api/v1.0/strains/search/' + userChoice,
      method: 'GET',
      data: {

      },

      dataType: "jsonp",

      })


      .fail(function(err){
        if (err) throw err;
      })

      .done(function(data){
      var query = data;
      strainGame = [query.data[0].ucpc];
      console.log(strainGame);
      // strainGame = 'L2KQMTUFDH000000000000000';

      $.ajax({
      url: 'https://www.cannabisreports.com/api/v1.0/strains/' + strainGame + '/availability/geo/37.7674193/-122.4286195/25',
      method: 'GET',
      data : {

      },
      dataType: "jsonp",
    })
    .fail(function(err){
        if (err) throw err;
    })

    .done(function(data){
    for (i = 0; i < data.data.length; i++){
      var meridian = [data.data[i].location.lat, data.data[i].location.lng];
        console.log(meridian);
    }

    })
    })






    })

});


// $(document).ready(function() {
//   $('#strainhunter').on('submit', function(event){
//     event.preventDefault();
//     var userChoice = $('#hamburger').val();
//     console.log(userChoice);
//     // var strainGame;

//     // make an ajax call to get strains objects https://www.cannabisreports.com/api/v1.0/strains/search/Blue
//     $.ajax({
//       url: 'https://www.cannabisreports.com/api/v1.0/strains/search/' + userChoice,
//       method: 'GET',
//       data: {
//         // query: userChoice,
//         key: '9e9da60250eada1542feb130229cbc85f08d565e'
//       },
//       dataType: 'jsonp',
//     })
//     .done(function(data){
//       var query = data;
//       strainGame = [query.data[0].name, query.data[0].ucpc];
//       console.log(strainGame);
//       // strainGame = 'L2KQMTUFDH000000000000000';
//       $.ajax({
//         url: 'https://www.cannabisreports.com/api/v1.0/strains/' + strainGame[1] + '/availability/geo/37.7818533/-122.4076475/25',
      //   method: 'GET',
      //   data : {
      //     key: '9e9da60250eada1542feb130229cbc85f08d565e'
      //   },
      //   dataType: 'jsonp'
      // })
      // .done(function(data) {
      //   var search = data;
      //   for (i = 0; i < search.data.length; i++){
          // var marker = new google.maps.Marker({
          //   position: new google.maps.LatLng(search.data[i].location.lat, search.data[i].location.lng),
          //   title: 'Your Location',
          //   map: map
          // });
    //     }
    //   })
    //   .fail(function(err){
    //     if (err) throw err;
    //   })
    //   .always(function(){
    //     console.log("Request Completed");
    //   });

    // })
    // .fail(function(err){
//       if (err) throw err;
//     })
//     .always(function(){
//       console.log("Request Completed");
//     });
//   });
// });
    </script>

    <script async defer
        src="https://maps.googleapis.com/maps/api/js?process.env.BOOM_BOOM_ROOM&callback=initialize">
    </script>

<div class="container">
  <div class="row">
    <div id="infoRow" class="col-sm-12 col-md-12 col-lg-12">
      <span><h1>Strain Finder</h1></span>
            <form id="strainhunter"><font color="white">
                SEARCH BY STRAIN</font>:<br>
                  <input type="text" name="strainfind" id="hamburger">
                  <input type="submit" value="Submit" id="sendit">
            </form>
          </div>
        </div>
     <!-- <div class="row">
        <div id="0" class="col-sm-12 col-md-4 col-lg-4 cell"><div class="cellNum"></div></div>
        <div id="1" class="col-sm-12 col-md-4 col-lg-4 cell"><div class="cellNum"></div></div>
        <div id="2" class="col-sm-12 col-md-4 col-lg-4 cell"><div class="cellNum"></div></div>
      </div>
      <div class="row">
        <div id="3" class="col-sm-12 col-md-4 col-lg-4 cell"><div class="cellNum"></div></div>
        <div id="4" class="col-sm-12 col-md-4 col-lg-4 cell"><div class="cellNum"></div></div>
        <div id="5" class="col-sm-12 col-md-4 col-lg-4 cell"><div class="cellNum"></div></div>
      </div>
      <div class="row">
        <div id="6" class="col-sm-12 col-md-4 col-lg-4 cell"><div class="cellNum"></div></div>
        <div id="7" class="col-sm-12 col-md-4 col-lg-4 cell"><div class="cellNum"></div></div>
        <div id="8" class="col-sm-12 col-md-4 col-lg-4 cell"><div class="cellNum"></div></div>
      </div> -->
    </div>



<!--     <script type="text/javascript" src="script.js"></script> -->
</body>
</html>






